<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS 请求</title>
    <script>
        //阻塞页面的渲染
        //window.onload
        // document.addEventListener('DOMContentLoaded', () => {
        // console.log(document.getElementById('repos'));

        // });
    </script>
</head>

<body>
    <ul id="repos"></ul>
    <script>
        document.addEventListener('DOMContentLoaded',async () => {
           //then链式调用比较麻烦
            //console.log(document.getElementById('repos'));
            // fetch('https://api.github.com/users/shunwuyu')
            //     .then(res => res.json())
            //     .then(data => {
            //         document.getElementById('repos').innerHTML = data.map(item =>
            //             `<li>${item.name}</li>`
            //         ).join('')
            //     })
            //同步代码一样
            //es8 async await
            //await后面是一个promise实例
            //new Promise Promise {}
            //fetch的本质是 返回一个promise实例
            //pending 状态 等待中
            console.log(fetch('https://api.github.com/users/shunwuyu'));
            //resolve()  fullfilled 完成了
            //reject()  rejected 拒绝了 失败
            
            const result=await fetch('https://api.github.com/users/shunwuyu')
            const data=await result.json()
            document.getElementById('repos').innerHTML=data.map(item=>`<li>${item.name}</li>`).join('')
        });
        // api 接口地址
        // www.bilibili.com 网站地址，用户访问的
        // https://api.github.com/users/shunwuyu url
        // 返回的数据是JSON 格式的
        // 资源
        // 前端
        // - 通过js fetch 主动拉取资源
        // 前端  自己做主
        // - web 2.0 动态页面
    </script>
</body>

</html>