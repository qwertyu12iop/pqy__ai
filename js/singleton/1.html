<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>设计模式之单例模式</title>
</head>

<body>
    <script>
        /*
        * Storage 本地存储类
        * 单例模式 getInstance 静态方法 
        * @func getitem(key) 获取本地存储的值
        * @func setitem(key,value) 设置本地存储的值
        */
        //函数+prototype 完成类  js是原型式的
        //js的原型式的 灵活、优雅、简单
        //面向对象都不用学
        //JAVA C++ 不能理解
        //es6 为了拥抱更多开发者 企业级大型项目开发
        //如何让class只会实例化一次
        //全局变量
        class Storage {
            static instance;//静态属性
            constructor() {
                console.log(this, '////');
            }
            //静态方法 
            static getInstance() {
                //返回一个实例
                //如果实例化过 返回之前的
                //第一次 实例化
                //静态属性 
                //es6 的class只是语法糖
                //Storage 对象 instance
                if (!Storage.instance) {
                    Storage.instance = new Storage();
                }
                return Storage.instance;
            }
            getItem(key) {
                return localStorage.getItem(key);
            }
            setItem(key, value) {
                return localStorage.setItem(key, value);
            }
        }
        //单例 性能好
        //new干掉 又能拿到对象的实例
        //静态方法 属于类的方法 不用实例化
        //public private 属于实例的方法
        const storage1 = Storage.getInstance();//静态方法
        const storage2 = Storage.getInstance();
        //都是引用
        //虽然现在的es6 都是用class(语法糖)构建类 本质还是原型式的
        //如何让它变成true
        console.log(storage1 === storage2, '~~~');
        storage1.setItem('name', '皮皮');
        console.log(storage1.getItem('name'));
        console.log(storage2.getItem('name'));


    </script>
</body>

</html>