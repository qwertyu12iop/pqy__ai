# 阮一峰closure

- 闭包是核心考点和难点
- 闭包可以帮助外部读取函数内部的变量
- 声明不带 var 就是全局变量
  语言精粹 The Good Parts The Bad Parts
- 如何介绍闭包
  - 函数嵌套函数（作用域链的嵌套）
  f2在f1的里面形成了一个闭包
  - 内部函数要返回
  - 闭包也叫背包，自由变量不会销毁
  执行先后顺序带来的
  立即回收机制 引用计数
  - 闭包可能带来内存的泄露
  - 内层函数叫闭包函数

## 闭包就是将函数内部和函数外部连接起来的一座桥梁。

## 闭包的作用

- 读取函数内部的变量
- 让这些变量的值始终保持在函数中（记忆函数）
- 怎么说明外部函数的自由变量不会销毁？
  引用计数
  闭包函数的引用计数为1，外部函数的引用计数为2，
  外部函数执行完后，外部函数的引用计数为1，

## 注意
   - 闭包内存消耗比较大，可能内存泄露
     在退出函数之前，将不能使用的局部变量全部销毁 delete 或者 赋值为null
   - 闭包会在父函数外部，改变父函数内部变量的值
     带来不确定性 **自由变量**
